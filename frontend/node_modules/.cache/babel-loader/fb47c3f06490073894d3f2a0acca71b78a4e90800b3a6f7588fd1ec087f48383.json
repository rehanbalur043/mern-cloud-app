{"ast":null,"code":"// frontend/src/components/products/Products.jsx\nimport React,{useState,useEffect}from\"react\";import api from\"../../services/apiService\";// adjust path if different\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Products=()=>{const[products,setProducts]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);// Add‑product form state\nconst[showAddForm,setShowAddForm]=useState(false);const[newName,setNewName]=useState(\"\");const[newQty,setNewQty]=useState(\"\");// Fetch products from backend\nconst fetchProducts=async()=>{try{setLoading(true);setError(null);const data=await api.getProducts();// ← here\nsetProducts(data.products||data||[]);}catch(err){console.error(\"Fetch products error:\",err);setError(\"Failed to load products\");}finally{setLoading(false);}};useEffect(()=>{fetchProducts();},[]);const handleAddClick=()=>{setShowAddForm(true);};const handleCancel=()=>{setShowAddForm(false);setNewName(\"\");setNewQty(\"\");};const handleSubmit=async e=>{e.preventDefault();const qtyNumber=Number(newQty);if(!newName.trim()||!newQty||qtyNumber<=0){alert(\"Please enter a valid product name and quantity.\");return;}try{setLoading(true);setError(null);const payload={name:newName.trim(),description:\"Added from UI\",price:0,category:\"Other\",stock:qtyNumber};await api.createProduct(payload);// ← here\nsetShowAddForm(false);setNewName(\"\");setNewQty(\"\");await fetchProducts();// refresh table\n}catch(err){var _err$response,_err$response$data;console.error(\"Create product error:\",err);setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"Failed to add product\");}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"1.5rem\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",marginBottom:\"1rem\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Products\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddClick,children:\"ADD PRODUCT\"})]}),showAddForm&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,style:{display:\"flex\",gap:\"0.5rem\",alignItems:\"center\",marginBottom:\"1rem\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Product name\",value:newName,onChange:e=>setNewName(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Quantity\",value:newQty,onChange:e=>setNewQty(e.target.value),min:\"1\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleCancel,children:\"Cancel\"})]}),loading&&/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:error}),/*#__PURE__*/_jsxs(\"table\",{style:{width:\"100%\",borderCollapse:\"collapse\",marginTop:\"0.5rem\"},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{borderBottom:\"1px solid #ccc\",textAlign:\"left\"},children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{style:{borderBottom:\"1px solid #ccc\",textAlign:\"left\"},children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{style:{borderBottom:\"1px solid #ccc\",textAlign:\"left\"},children:\"Category\"}),/*#__PURE__*/_jsx(\"th\",{style:{borderBottom:\"1px solid #ccc\",textAlign:\"left\"},children:\"Price\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:products.length===0?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"4\",style:{paddingTop:\"0.75rem\"},children:\"No products found.\"})}):products.map(p=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:{padding:\"0.5rem 0\"},children:p.name}),/*#__PURE__*/_jsx(\"td\",{style:{padding:\"0.5rem 0\"},children:p.stock}),/*#__PURE__*/_jsx(\"td\",{style:{padding:\"0.5rem 0\"},children:p.category}),/*#__PURE__*/_jsx(\"td\",{style:{padding:\"0.5rem 0\"},children:p.price})]},p.id))})]})]});};export default Products;","map":{"version":3,"names":["React","useState","useEffect","api","jsx","_jsx","jsxs","_jsxs","Products","products","setProducts","loading","setLoading","error","setError","showAddForm","setShowAddForm","newName","setNewName","newQty","setNewQty","fetchProducts","data","getProducts","err","console","handleAddClick","handleCancel","handleSubmit","e","preventDefault","qtyNumber","Number","trim","alert","payload","name","description","price","category","stock","createProduct","_err$response","_err$response$data","response","message","style","padding","children","display","justifyContent","alignItems","marginBottom","onClick","onSubmit","gap","type","placeholder","value","onChange","target","min","color","width","borderCollapse","marginTop","borderBottom","textAlign","length","colSpan","paddingTop","map","p","id"],"sources":["D:/Cloud Comp/mern-cloud-app/frontend/src/components/products/Products.jsx"],"sourcesContent":["// frontend/src/components/products/Products.jsx\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport api from \"../../services/apiService\"; // adjust path if different\r\n\r\nconst Products = () => {\r\n  const [products, setProducts] = useState([]);\r\n  const [loading, setLoading]   = useState(false);\r\n  const [error, setError]       = useState(null);\r\n\r\n  // Add‑product form state\r\n  const [showAddForm, setShowAddForm] = useState(false);\r\n  const [newName, setNewName]         = useState(\"\");\r\n  const [newQty, setNewQty]           = useState(\"\");\r\n\r\n  // Fetch products from backend\r\n  const fetchProducts = async () => {\r\n  try {\r\n    setLoading(true);\r\n    setError(null);\r\n    const data = await api.getProducts();   // ← here\r\n    setProducts(data.products || data || []);\r\n  } catch (err) {\r\n    console.error(\"Fetch products error:\", err);\r\n    setError(\"Failed to load products\");\r\n  } finally {\r\n    setLoading(false);\r\n  }\r\n};\r\n\r\n\r\n  useEffect(() => {\r\n    fetchProducts();\r\n  }, []);\r\n\r\n  const handleAddClick = () => {\r\n    setShowAddForm(true);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setShowAddForm(false);\r\n    setNewName(\"\");\r\n    setNewQty(\"\");\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n  e.preventDefault();\r\n\r\n  const qtyNumber = Number(newQty);\r\n\r\n  if (!newName.trim() || !newQty || qtyNumber <= 0) {\r\n    alert(\"Please enter a valid product name and quantity.\");\r\n    return;\r\n  }\r\n\r\n  try {\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    const payload = {\r\n      name: newName.trim(),\r\n      description: \"Added from UI\",\r\n      price: 0,\r\n      category: \"Other\",\r\n      stock: qtyNumber,\r\n    };\r\n\r\n    await api.createProduct(payload);  // ← here\r\n\r\n    setShowAddForm(false);\r\n    setNewName(\"\");\r\n    setNewQty(\"\");\r\n\r\n    await fetchProducts();             // refresh table\r\n  } catch (err) {\r\n    console.error(\"Create product error:\", err);\r\n    setError(\r\n      err.response?.data?.message || \"Failed to add product\"\r\n    );\r\n  } finally {\r\n    setLoading(false);\r\n  }\r\n};\r\n\r\n\r\n  return (\r\n    <div style={{ padding: \"1.5rem\" }}>\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          justifyContent: \"space-between\",\r\n          alignItems: \"center\",\r\n          marginBottom: \"1rem\",\r\n        }}\r\n      >\r\n        <h2>Products</h2>\r\n        <button onClick={handleAddClick}>ADD PRODUCT</button>\r\n      </div>\r\n\r\n      {showAddForm && (\r\n        <form\r\n          onSubmit={handleSubmit}\r\n          style={{\r\n            display: \"flex\",\r\n            gap: \"0.5rem\",\r\n            alignItems: \"center\",\r\n            marginBottom: \"1rem\",\r\n          }}\r\n        >\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Product name\"\r\n            value={newName}\r\n            onChange={(e) => setNewName(e.target.value)}\r\n          />\r\n          <input\r\n            type=\"number\"\r\n            placeholder=\"Quantity\"\r\n            value={newQty}\r\n            onChange={(e) => setNewQty(e.target.value)}\r\n            min=\"1\"\r\n          />\r\n          <button type=\"submit\">Save</button>\r\n          <button type=\"button\" onClick={handleCancel}>\r\n            Cancel\r\n          </button>\r\n        </form>\r\n      )}\r\n\r\n      {loading && <p>Loading...</p>}\r\n      {error && <p style={{ color: \"red\" }}>{error}</p>}\r\n\r\n      <table\r\n        style={{\r\n          width: \"100%\",\r\n          borderCollapse: \"collapse\",\r\n          marginTop: \"0.5rem\",\r\n        }}\r\n      >\r\n        <thead>\r\n          <tr>\r\n            <th style={{ borderBottom: \"1px solid #ccc\", textAlign: \"left\" }}>\r\n              Name\r\n            </th>\r\n            <th style={{ borderBottom: \"1px solid #ccc\", textAlign: \"left\" }}>\r\n              Quantity\r\n            </th>\r\n            <th style={{ borderBottom: \"1px solid #ccc\", textAlign: \"left\" }}>\r\n              Category\r\n            </th>\r\n            <th style={{ borderBottom: \"1px solid #ccc\", textAlign: \"left\" }}>\r\n              Price\r\n            </th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {products.length === 0 ? (\r\n            <tr>\r\n              <td colSpan=\"4\" style={{ paddingTop: \"0.75rem\" }}>\r\n                No products found.\r\n              </td>\r\n            </tr>\r\n          ) : (\r\n            products.map((p) => (\r\n              <tr key={p.id}>\r\n                <td style={{ padding: \"0.5rem 0\" }}>{p.name}</td>\r\n                <td style={{ padding: \"0.5rem 0\" }}>{p.stock}</td>\r\n                <td style={{ padding: \"0.5rem 0\" }}>{p.category}</td>\r\n                <td style={{ padding: \"0.5rem 0\" }}>{p.price}</td>\r\n              </tr>\r\n            ))\r\n          )}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Products;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}